# Run from inside container: docker exec -w /repo dbt_cli pre-commit run --all-files
# dbt hooks only run when files under dbt_project/ are modified

repos:
  - repo: local
    hooks:
      - id: dbt-seed
        name: dbt seed
        entry: bash -c 'dbt seed --profiles-dir /usr/app/dbt --project-dir /usr/app/dbt'
        language: system
        pass_filenames: false
        files: ^dbt_project/
      - id: dbt-run
        name: dbt run (modified + downstream)
        entry: bash /repo/scripts/dbt-run-modified.sh
        language: system
        pass_filenames: false
        files: ^dbt_project/
      - id: dbt-test
        name: dbt test (modified + downstream)
        entry: bash /repo/scripts/dbt-test-modified.sh
        language: system
        pass_filenames: false
        files: ^dbt_project/
